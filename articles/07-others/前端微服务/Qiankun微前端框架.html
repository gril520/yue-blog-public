<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Qiankun 微前端框架 | Leyue的个人博客</title>
    <meta name="description" content="记录问题，总结技术">
    <meta name="generator" content="VitePress v1.0.0-rc.45">
    <link rel="preload stylesheet" href="/yue-blog-public/assets/style.B-ui0hRU.css" as="style">
    
    <script type="module" src="/yue-blog-public/assets/app.S5A5MLjB.js"></script>
    <link rel="preload" href="/yue-blog-public/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/yue-blog-public/assets/chunks/framework.BCDg3NR7.js">
    <link rel="modulepreload" href="/yue-blog-public/assets/chunks/theme.Dxp_92LT.js">
    <link rel="modulepreload" href="/yue-blog-public/assets/articles_07-others_前端微服务_Qiankun微前端框架.md.TUkssOUy.lean.js">
    <meta http-equiv="cache-control" content="no-cache,no-store, must-revalidate">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-19c990f1><div class="wrapper" data-v-19c990f1><div class="container" data-v-19c990f1><div class="title" data-v-19c990f1><div class="VPNavBarTitle has-sidebar" data-v-19c990f1 data-v-ab179fa1><a class="title" href="/yue-blog-public/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/yue-blog-public/logo.png" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>Leyue的个人博客</span><!--[--><!--]--></a></div></div><div class="content" data-v-19c990f1><div class="content-body" data-v-19c990f1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-19c990f1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-19c990f1 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/yue-blog-public/articles/01-vue/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>vue</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/yue-blog-public/articles/02-htmlcss/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>htmlcss</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/yue-blog-public/articles/03-js/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>js</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/yue-blog-public/articles/04-mobile/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>mobile</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/yue-blog-public/articles/05-components/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>components</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/yue-blog-public/articles/07-others/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>others</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-19c990f1 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-19c990f1 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://blog.csdn.net/yue200403?type=blog" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-19c990f1 data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://blog.csdn.net/yue200403?type=blog" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-19c990f1 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-19c990f1><div class="divider-line" data-v-19c990f1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-d2ecc192><button data-v-d2ecc192>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>代码规范</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/Git%E6%92%A4%E9%94%80%E6%8F%90%E4%BA%A4%E6%93%8D%E4%BD%9C.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Git撤销提交操作</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/%E6%9C%AC%E5%9C%B0%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0Git%E4%BB%93%E5%BA%93.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>本地项目上传Git仓库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/%E7%BB%9F%E4%B8%80%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>统一前端代码规范</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible has-active" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>前端微服务</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E5%89%8D%E7%AB%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1/Qiankun%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Qiankun微前端框架</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>搭建组件库</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E6%90%AD%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93/npm%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0%E7%A7%81%E4%BB%93.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>npm发布代码到私仓</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E6%90%AD%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93/%E6%90%AD%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93%E5%B9%B6%E4%B8%94%E5%8F%91%E5%B8%83%E5%88%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>搭建组件库并且发布到私有仓库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E6%90%AD%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93/%E7%BB%84%E4%BB%B6%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85%E6%80%9D%E8%80%83.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>组件二次封装思考</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>文件相关</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/PDF.js%E5%AE%9E%E7%8E%B0PDF%E9%A2%84%E8%A7%88.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>PDF.js实现PDF预览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>文件下载</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>暂存</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E6%9A%82%E5%AD%98/npm%20link%E5%92%8Cpnpm%20link.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>npm link和pnpm link</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>项目部署</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/yue-blog-public/articles/07-others/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Nginx%20%E5%89%8D%E7%AB%AF.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Nginx 前端</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-935f8a84><div class="content" data-v-935f8a84><div class="outline-marker" data-v-935f8a84></div><div class="outline-title" role="heading" aria-level="2" data-v-935f8a84>文章目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-935f8a84><span class="visually-hidden" id="doc-outline-aria-label" data-v-935f8a84> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-935f8a84 data-v-b933a997><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _yue-blog-public_articles_07-others_%E5%89%8D%E7%AB%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1_Qiankun%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6" data-v-39a288b8><div><h1 id="qiankun-微前端框架" tabindex="-1">Qiankun 微前端框架 <a class="header-anchor" href="#qiankun-微前端框架" aria-label="Permalink to &quot;Qiankun 微前端框架&quot;">​</a></h1><h2 id="_1-简介" tabindex="-1">1.简介 <a class="header-anchor" href="#_1-简介" aria-label="Permalink to &quot;1.简介&quot;">​</a></h2><p>Qiankun 是一个面向微前端架构的 JavaScript 框架，由蚂蚁金服开发并维护。它旨在解决微前端架构下的应用集成、共享、隔离等问题，让前端应用更加灵活、可维护和可扩展。</p><p>Qiankun 提供了一种将多个独立的前端应用（微应用）组合成一个大型应用的方式，每个微应用都可以独立开发、构建、部署和运行。这些微应用可以是由不同团队开发，使用不同的技术栈实现的。</p><p>Qiankun 提供了以下核心功能：</p><ol><li><strong>应用注册与加载</strong>：Qiankun 提供了应用注册的 API，使得主应用可以动态加载并管理多个微应用。</li><li><strong>应用间通信</strong>：微应用之间和微应用与主应用之间可以通过 Qiankun 提供的通信机制进行通信，包括路由间的消息传递、状态共享等。</li><li><strong>样式隔离</strong>：Qiankun 通过 CSS Scoped 或 CSS Module 等技术来隔离各个微应用的样式，避免样式冲突。</li><li><strong>沙箱机制</strong>：Qiankun 使用沙箱机制隔离各个微应用的 JavaScript 执行环境，保证它们之间的安全性和稳定性。</li><li><strong>资源共享</strong>：Qiankun 提供了一种机制，可以让多个微应用共享同一份资源，如公共组件、公共库等。</li></ol><p>使用 Qiankun 可以使得前端项目更易于拆分和组合，提高了团队的开发效率和系统的可维护性。</p><h2 id="_2-qiankun搭建微前端场景" tabindex="-1">2.qiankun搭建微前端场景 <a class="header-anchor" href="#_2-qiankun搭建微前端场景" aria-label="Permalink to &quot;2.qiankun搭建微前端场景&quot;">​</a></h2><p>使用 Qiankun 搭建微前端架构是否有必要，取决于你的项目需求、团队规模和开发目标等因素。以下是一些考虑因素：</p><ol><li><strong>项目规模和复杂度</strong>：如果你的项目是单一的、规模不大，且没有明显的团队分工和代码复用需求，可能不需要引入微前端架构。</li><li><strong>团队分工和独立部署需求</strong>：如果你的团队分成多个子团队，每个子团队负责开发和维护不同的功能模块，或者每个团队都有独立的部署需求，那么微前端架构可能会更适合，Qiankun 正是为这种场景设计的。</li><li><strong>代码复用和共享资源需求</strong>：如果你希望多个项目之间可以共享一些代码、组件或者库，或者希望统一管理项目的依赖关系和版本，那么微前端架构可以提供更好的支持。</li><li><strong>技术栈统一性</strong>：虽然你提到多个项目都使用 Vue 开发，但如果团队中还有其他技术栈的项目，微前端架构可以提供一种统一的技术栈和开发模式。</li><li><strong>团队成员的熟悉程度</strong>：引入微前端架构会增加复杂度和学习成本，需要团队成员熟悉相关的概念和技术，因此需要权衡团队的技术水平和承受能力。</li></ol><p>总之，Qiankun 是为了解决多个独立前端项目集成的问题而设计的，如果你的项目存在上述需求，那么使用 Qiankun 搭建微前端架构可能会是一个不错的选择。但如果项目比较简单，且没有明显的团队分工和复用需求，引入微前端架构可能反而增加了不必要的复杂度。</p><h2 id="_3-qiankun-demo-微前端框架应用" tabindex="-1">3.qiankun-DEMO 微前端框架应用 <a class="header-anchor" href="#_3-qiankun-demo-微前端框架应用" aria-label="Permalink to &quot;3.qiankun-DEMO 微前端框架应用&quot;">​</a></h2><p>案例结构：</p><p><img src="/yue-blog-public/assets/image-20240228134711174.CplIdDau.png" alt="image-20240228134711174"></p><p>一个主应用，3个子应用；【main vue2】【vue2 vue3 react】</p><p><img src="/yue-blog-public/assets/image-20240228135001110.cFSaiVW8.png" alt="image-20240228135001110"></p><p>页面效果：</p><p><img src="/yue-blog-public/assets/image-20240228135038824.piA0LFWv.png" alt="image-20240228135038824"></p><p><img src="/yue-blog-public/assets/image-20240228135204247.bmsF8eUt.png" alt="image-20240228135204247"></p><p>如何使用qiankun</p><p>1.主应用安装qiankun</p><p><img src="/yue-blog-public/assets/image-20240228135449784.D9l-zVi0.png" alt="image-20240228135449784"></p><p>2.入口文件配置</p><p><img src="/yue-blog-public/assets/image-20240228135630868.DzNG7UiW.png" alt="image-20240228135630868"></p><p><img src="/yue-blog-public/assets/image-20240228140222124.CPlcxT7w.png" alt="image-20240228140222124"></p><p>渲染容器</p><p><img src="/yue-blog-public/assets/image-20240228140357044.BELPenJQ.png" alt="image-20240228140357044"></p><p>3.子应用配置 子应用如何接入乾坤</p><p><img src="/yue-blog-public/assets/image-20240228141231749.BLqNY34P.png" alt="image-20240228141231749"></p><p>子应用入口文件</p><p><img src="/yue-blog-public/assets/image-20240228141324483.0ynFuUpn.png" alt="image-20240228141324483"></p><p><img src="/yue-blog-public/assets/image-20240228141412465.CHVgAC-r.png" alt="image-20240228141412465"></p><p>如果是微前端运行，主应用会把container传给子应用，并且将子应用挂载到主应用给的容器中渲染，否则独立渲染。</p><p><img src="/yue-blog-public/assets/image-20240228141836900.q0doAWuJ.png" alt="image-20240228141836900"></p><p>4.子应用跨域和webpack打包配置</p><p><img src="/yue-blog-public/assets/image-20240228142241476.VlbL9j5N.png" alt="image-20240228142241476"></p><p>5.react子应用</p><p><img src="/yue-blog-public/assets/image-20240228142345404.C-fK-Q1X.png" alt="image-20240228142345404"></p><p><img src="/yue-blog-public/assets/image-20240228142510071.DhAlUagp.png" alt="image-20240228142510071"></p><p><img src="/yue-blog-public/assets/image-20240228142547955.kvYfFRcW.png" alt="image-20240228142547955"></p><p>webpack适配</p><p><img src="/yue-blog-public/assets/image-20240228142640537.CuBdBQMe.png" alt="image-20240228142640537"></p><h2 id="_4-手写mini版乾坤" tabindex="-1">4.手写mini版乾坤 <a class="header-anchor" href="#_4-手写mini版乾坤" aria-label="Permalink to &quot;4.手写mini版乾坤&quot;">​</a></h2><p>实现registerMicroApps和start方法：</p><p><img src="/yue-blog-public/assets/image-20240228094549720.BN_vEqmh.png" alt="image-20240228094549720"></p><p>路由监听：history路由模式=&gt;前进后退、添加历史记录、替换历史记录</p><p><img src="/yue-blog-public/assets/image-20240228095126005.3in7cvoR.png" alt="image-20240228095126005"></p><p>封装代码：</p><p><img src="/yue-blog-public/assets/image-20240228095502331.Bzll_scj.png" alt="image-20240228095502331"></p><p><img src="/yue-blog-public/assets/image-20240228095538098.DcoLy114.png" alt="image-20240228095538098"></p><p>封装处理路由变化逻辑</p><p><img src="/yue-blog-public/assets/image-20240228095632825.ku8CPxFQ.png" alt="image-20240228095632825"></p><p>处理路由变化逻辑</p><p><img src="/yue-blog-public/assets/image-20240228100210899.CEo2Jiit.png" alt="image-20240228100210899"></p><p>初始执行匹配</p><p><img src="/yue-blog-public/assets/image-20240228100055640.rZ-RC-sX.png" alt="image-20240228100055640"></p><p>加载子应用获取子应用资源</p><p><img src="/yue-blog-public/assets/image-20240228100638531.CYy1gjPM.png" alt="image-20240228100638531"></p><p>封装fetch</p><p><img src="/yue-blog-public/assets/image-20240228102628670.EbFoWNRC.png" alt="image-20240228102628670"></p><p>获取script代码</p><p><img src="/yue-blog-public/assets/image-20240228103422474.c6Z27ame.png" alt="image-20240228103422474"></p><p>执行js代码</p><p><img src="/yue-blog-public/assets/image-20240228103732812.B390iZUO.png" alt="image-20240228103732812"></p><p>配置全局变量</p><p><img src="/yue-blog-public/assets/image-20240228104141407.Be4S_cTh.png" alt="image-20240228104141407"></p><p>打包子应用，并且分析umd文件</p><p><img src="/yue-blog-public/assets/image-20240228104802253.DOzpre-c.png" alt="image-20240228104802253"></p><p><img src="/yue-blog-public/assets/image-20240228104915677.C6nXmhhq.png" alt="image-20240228104915677"></p><p>把结果返回</p><p><img src="/yue-blog-public/assets/image-20240228105041766.BU2BXQiY.png" alt="image-20240228105041766"></p><p>改进：</p><p><img src="/yue-blog-public/assets/image-20240228105430888.C41GYUot.png" alt="image-20240228105430888"></p><p>调用子应用的乾坤生命周期钩子</p><p><img src="/yue-blog-public/assets/image-20240228110023313.Bge626SG.png" alt="image-20240228110023313"></p><p>成功渲染结果：问题1：图片未被正确渲染</p><p><img src="/yue-blog-public/assets/image-20240228110103578.Bbe04Xcj.png" alt="image-20240228110103578"></p><p>webpack打包是从入口模块开始打包的，子应用中，生命周期钩子必须写在入口模块中。</p><p>实现切换应用功能，涉及如何注销上一个应用；</p><p>路由监视，自己维护一个变量，用于存储上一个应用的路由</p><p><img src="/yue-blog-public/assets/image-20240228110833927.8KmUefjy.png" alt="image-20240228110833927"></p><p><img src="/yue-blog-public/assets/image-20240228110944994.BAMSbx_9.png" alt="image-20240228110944994"></p><p>渲染下一个应用前先销毁上一个应用：</p><p><img src="/yue-blog-public/assets/image-20240228111332889.B7P55IWT.png" alt="image-20240228111332889"></p><p><img src="/yue-blog-public/assets/image-20240228130325264.v9UwD1AZ.png" alt="image-20240228130325264"></p><p>前进后退的路由维护，导航前导航后状态的维护。</p><p><img src="/yue-blog-public/assets/image-20240228130808416.BE1J2u7r.png" alt="image-20240228130808416"></p><p>子应用publicPath设置</p><p><img src="/yue-blog-public/assets/image-20240228131331156.VWmL2W3T.png" alt="image-20240228131331156"></p><p>图片问题解决：</p><p><img src="/yue-blog-public/assets/image-20240228131435029.BYuU9-3p.png" alt="image-20240228131435029"></p><p>请求的资源相对于当前页面的路径，即当前文档页面</p><p><img src="/yue-blog-public/assets/image-20240228131524460.H6PBh4Ab.png" alt="image-20240228131524460"></p><p>目前这种写法直接就请求9000下的img了</p><p><img src="/yue-blog-public/assets/image-20240228131707174.MeTkvUU2.png" alt="image-20240228131707174"></p><p>法一、指定域名</p><p><img src="/yue-blog-public/assets/image-20240228131847561.BeczQFna.png" alt="image-20240228131847561"></p><p>缺点，子应用只能运行在当前域名。</p><p><img src="/yue-blog-public/assets/image-20240228132239518.DQ4VvrHu.png" alt="image-20240228132239518"></p><p><img src="/yue-blog-public/assets/image-20240228132314858.BvqjjInW.png" alt="image-20240228132314858"></p><p>设置全局变量</p><p><img src="/yue-blog-public/assets/image-20240228132451044.D48uok-d.png" alt="image-20240228132451044"></p><p>后续问题：处理样式隔离，JS沙箱</p><p>乾坤如何解决：</p><p>1.shadowDom隔离样式（shadowDOM兼容性不太好）</p><p><img src="/yue-blog-public/assets/image-20240228133834397.BD3gFZA0.png" alt="image-20240228133834397"></p><p><img src="/yue-blog-public/assets/image-20240228133248864.BgqKc1Wz.png" alt="image-20240228133248864"></p><p>2.添加选择器</p><p><img src="/yue-blog-public/assets/image-20240228134013906.d0st8tXx.png" alt="image-20240228134013906"></p><p>演示：</p><p><img src="/yue-blog-public/assets/image-20240228133531764.BMdpuMLD.png" alt="image-20240228133531764"></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-09de1c0f><!--[--><!--]--><div class="edit-info" data-v-09de1c0f><!----><div class="last-updated" data-v-09de1c0f><p class="VPLastUpdated" data-v-09de1c0f data-v-7e05ebdb>最后更新: <time datetime="2024-03-25T01:25:23.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-09de1c0f><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link prev" href="/yue-blog-public/articles/07-others/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/%E7%BB%9F%E4%B8%80%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>上一篇</span><span class="title" data-v-09de1c0f>统一前端代码规范</span><!--]--></a></div><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link next" href="/yue-blog-public/articles/07-others/%E6%90%AD%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%BA%93/npm%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0%E7%A7%81%E4%BB%93.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>下一篇</span><span class="title" data-v-09de1c0f>npm发布代码到私仓</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2024-2025 Leyue</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"articles_03-js_02 作用域、执行上下文.md\":\"CWSey-ca\",\"articles_03-js_03 彻底搞懂 this.md\":\"B0GyVuF-\",\"articles_03-js_05 深入理解 call、apply、bind.md\":\"CuvGaESt\",\"articles_03-js_06 数组.md\":\"akUleOBH\",\"articles_03-js_index.md\":\"DumSCgsP\",\"articles_04-mobile_index.md\":\"BJTrzIvZ\",\"articles_05-components_api-examples.md\":\"CY6gWEWi\",\"articles_05-components_markdown-examples.md\":\"Zq3BfoYw\",\"articles_07-others_index.md\":\"BfIKfop5\",\"articles_07-others_代码规范_git撤销提交操作.md\":\"zxrHYY0G\",\"articles_07-others_代码规范_本地项目上传git仓库.md\":\"DIfO28Xh\",\"articles_07-others_搭建组件库_npm发布代码到私仓.md\":\"BnC90msl\",\"articles_07-others_搭建组件库_搭建组件库并且发布到私有仓库.md\":\"qyiYYa6w\",\"articles_07-others_搭建组件库_组件二次封装思考.md\":\"DWTcVEa-\",\"articles_07-others_文件相关_pdf.js实现pdf预览.md\":\"B0PoHB2n\",\"articles_07-others_文件相关_文件下载.md\":\"Bs7A9Z9j\",\"articles_07-others_暂存_npm link和pnpm link.md\":\"40meRfOi\",\"articles_03-js_04 闭包.md\":\"BTFPgjXr\",\"articles_01-vue_第 4 章_ajax和插槽.md\":\"DoaOJg2d\",\"articles_02-htmlcss_03 css进阶.md\":\"DQwdVDFP\",\"index.md\":\"D6Uu6eJc\",\"articles_01-vue_第 6 章_vuerouter.md\":\"DstMKsSG\",\"articles_01-vue_第 7 章_vue 实战技巧.md\":\"DvJFc4LD\",\"articles_02-htmlcss_04 html5.md\":\"BM3x17jV\",\"articles_07-others_代码规范_统一前端代码规范.md\":\"Cc6ENt8z\",\"articles_02-htmlcss_01 html基础.md\":\"CoeNeGxy\",\"articles_03-js_01 函数.md\":\"B65dKa44\",\"articles_07-others_前端微服务_qiankun微前端框架.md\":\"TUkssOUy\",\"articles_02-htmlcss_02 css基础.md\":\"CYCk0YSf\",\"articles_02-htmlcss_06 css3进阶.md\":\"1brUNPyd\",\"articles_05-components_file-sharding-upload.md\":\"Hf10pD6e\",\"articles_01-vue_第 8 章 总结50个vue知识点.md\":\"6a-ZPI6y\",\"articles_01-vue_index.md\":\"DWsUO_tK\",\"articles_01-vue_第 5 章_vuex.md\":\"9vuOFuSY\",\"articles_05-components_hello.md\":\"R8ZXErkd\",\"articles_05-components_index.md\":\"CZBi3OiZ\",\"articles_02-htmlcss_05 css3基础.md\":\"BaLOskQI\",\"articles_07-others_项目部署_nginx 前端.md\":\"DXSHdWmQ\",\"articles_01-vue_第 3 章_vue 脚手架.md\":\"ymRwZuam\",\"articles_01-vue_第 2 章_vue 组件化编程.md\":\"BkqQgO2l\",\"articles_02-htmlcss_index.md\":\"BMfAUlUx\",\"articles_01-vue_第 1 章_vue 核心.md\":\"eU_h-lfk\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Leyue的个人博客\",\"description\":\"记录问题，总结技术\",\"base\":\"/yue-blog-public/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"search\":{\"provider\":\"local\"},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"lastUpdatedText\":\"最后更新\",\"outlineTitle\":\"文章目录\",\"outline\":\"deep\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://blog.csdn.net/yue200403?type=blog\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2024-2025 Leyue\"},\"nav\":[{\"text\":\"vue\",\"link\":\"/articles/01-vue/\",\"activeMatch\":\"/articles/01-vue/\"},{\"text\":\"htmlcss\",\"link\":\"/articles/02-htmlcss/\",\"activeMatch\":\"/articles/02-htmlcss/\"},{\"text\":\"js\",\"link\":\"/articles/03-js/\",\"activeMatch\":\"/articles/03-js/\"},{\"text\":\"mobile\",\"link\":\"/articles/04-mobile/\",\"activeMatch\":\"/articles/04-mobile/\"},{\"text\":\"components\",\"link\":\"/articles/05-components/\",\"activeMatch\":\"/articles/05-components/\"},{\"text\":\"others\",\"link\":\"/articles/07-others/\",\"activeMatch\":\"/articles/07-others/\"}],\"sidebar\":{\"/articles/01-vue/\":[{\"text\":\"第 1 章_Vue 核心\",\"link\":\"/articles/01-vue/第 1 章_Vue 核心\"},{\"text\":\"第 2 章_Vue 组件化编程\",\"link\":\"/articles/01-vue/第 2 章_Vue 组件化编程\"},{\"text\":\"第 3 章_Vue 脚手架\",\"link\":\"/articles/01-vue/第 3 章_Vue 脚手架\"},{\"text\":\"第 4 章_Ajax和插槽\",\"link\":\"/articles/01-vue/第 4 章_Ajax和插槽\"},{\"text\":\"第 5 章_Vuex\",\"link\":\"/articles/01-vue/第 5 章_Vuex\"},{\"text\":\"第 6 章_VueRouter\",\"link\":\"/articles/01-vue/第 6 章_VueRouter\"},{\"text\":\"第 7 章_Vue 实战技巧\",\"link\":\"/articles/01-vue/第 7 章_Vue 实战技巧\"},{\"text\":\"第 8 章 总结50个Vue知识点\",\"link\":\"/articles/01-vue/第 8 章 总结50个Vue知识点\"}],\"/articles/02-htmlcss/\":[{\"text\":\"01 HTML基础\",\"link\":\"/articles/02-htmlcss/01 HTML基础\"},{\"text\":\"02 CSS基础\",\"link\":\"/articles/02-htmlcss/02 CSS基础\"},{\"text\":\"03 CSS进阶\",\"link\":\"/articles/02-htmlcss/03 CSS进阶\"},{\"text\":\"04 HTML5\",\"link\":\"/articles/02-htmlcss/04 HTML5\"},{\"text\":\"05 CSS3基础\",\"link\":\"/articles/02-htmlcss/05 CSS3基础\"},{\"text\":\"06 CSS3进阶\",\"link\":\"/articles/02-htmlcss/06 CSS3进阶\"}],\"/articles/03-js/\":[{\"text\":\"01 函数\",\"link\":\"/articles/03-js/01 函数\"},{\"text\":\"02 作用域、执行上下文\",\"link\":\"/articles/03-js/02 作用域、执行上下文\"},{\"text\":\"03 彻底搞懂 this\",\"link\":\"/articles/03-js/03 彻底搞懂 this\"},{\"text\":\"04 闭包\",\"link\":\"/articles/03-js/04 闭包\"},{\"text\":\"05 深入理解 call、apply、bind\",\"link\":\"/articles/03-js/05 深入理解 call、apply、bind\"},{\"text\":\"06 数组\",\"link\":\"/articles/03-js/06 数组\"}],\"/articles/04-mobile/\":[],\"/articles/05-components/\":[{\"text\":\"api-examples\",\"link\":\"/articles/05-components/api-examples\"},{\"text\":\"file-sharding-upload\",\"link\":\"/articles/05-components/file-sharding-upload\"},{\"text\":\"hello\",\"link\":\"/articles/05-components/hello\"},{\"text\":\"markdown-examples\",\"link\":\"/articles/05-components/markdown-examples\"}],\"/articles/07-others/\":[{\"text\":\"代码规范\",\"collapsed\":false,\"items\":[{\"text\":\"Git撤销提交操作\",\"link\":\"/articles/07-others/代码规范/Git撤销提交操作\"},{\"text\":\"本地项目上传Git仓库\",\"link\":\"/articles/07-others/代码规范/本地项目上传Git仓库\"},{\"text\":\"统一前端代码规范\",\"link\":\"/articles/07-others/代码规范/统一前端代码规范\"}],\"collapsible\":true},{\"text\":\"前端微服务\",\"collapsed\":false,\"items\":[{\"text\":\"Qiankun微前端框架\",\"link\":\"/articles/07-others/前端微服务/Qiankun微前端框架\"}],\"collapsible\":true},{\"text\":\"搭建组件库\",\"collapsed\":false,\"items\":[{\"text\":\"npm发布代码到私仓\",\"link\":\"/articles/07-others/搭建组件库/npm发布代码到私仓\"},{\"text\":\"搭建组件库并且发布到私有仓库\",\"link\":\"/articles/07-others/搭建组件库/搭建组件库并且发布到私有仓库\"},{\"text\":\"组件二次封装思考\",\"link\":\"/articles/07-others/搭建组件库/组件二次封装思考\"}],\"collapsible\":true},{\"text\":\"文件相关\",\"collapsed\":false,\"items\":[{\"text\":\"PDF.js实现PDF预览\",\"link\":\"/articles/07-others/文件相关/PDF.js实现PDF预览\"},{\"text\":\"文件下载\",\"link\":\"/articles/07-others/文件相关/文件下载\"}],\"collapsible\":true},{\"text\":\"暂存\",\"collapsed\":false,\"items\":[{\"text\":\"npm link和pnpm link\",\"link\":\"/articles/07-others/暂存/npm link和pnpm link\"}],\"collapsible\":true},{\"text\":\"项目部署\",\"collapsed\":false,\"items\":[{\"text\":\"Nginx 前端\",\"link\":\"/articles/07-others/项目部署/Nginx 前端\"}],\"collapsible\":true}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>